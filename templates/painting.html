<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ site.title }}</title>
    {% if site.service == 1 %}
        <link rel="stylesheet" href="{{ url_for('static', filename='painting/css/normalize.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='painting/css/animate.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='painting/css/painting.css') }}">
    {% else %}
        <link rel="stylesheet" href="painting/css/normalize.css">
        <link rel="stylesheet" href="painting/css/animate.min.css">
        <link rel="stylesheet" href="painting/css/painting.css">
    {% endif %}
    <script async src="https://umami.7wate.org/script.js"
            data-website-id="635fec50-bc6c-4ac2-909a-e2a7403438be"></script>
</head>
<body>
<div class="container active animate__animated animate__fadeIn animate__slow" id="tab1">
    <audio id="bgm" loop>
        {% if site.service == 1 %}
            <source src="{{ url_for('static', filename='painting/music/bgm.mp3') }}" type="audio/mpeg">Your browser does
            not support the audio element.
        {% else %}
            <source src="painting/music/bgm.mp3" type="audio/mpeg">Your browser does not support the audio element.
        {% endif %}

    </audio>
    <div class="popup">
        <div class="notice">
            <h4>æ¸©é¦¨æç¤º</h4>
            <hr>
            <p>EndofYear ä½¿ç”¨äº’è”ç½‘å…¬å¼€çš„ RSS æ•°æ®æºï¼Œå¹¶ä½¿ç”¨è‡ªå»ºçš„ Umami æœåŠ¡ç»Ÿè®¡è®¿é—®é‡ï¼Œç»å¯¹ä¸ä¼šä¸»åŠ¨è·å–ä¸ªäººéšç§ä¿¡æ¯ã€‚ğŸ«£ğŸ«£ğŸ«£
                <br>
                <br>
                å¼€å¯æ–¹å¼ï¼šå°æ‰‹è½»è½»ç‚¹ ~
                <a href="https://github.com/7Wate/EndOfYear"></a>
            </p>
        </div>
        <div class="selection">
            <button value="true" class="allow">å¼€å¯éŸ³ä¹</button>
            <button value="false" class="deny">é™éŸ³è¿›å…¥</button>

        </div>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab2">
    <div class="tab2-box">
        <p class="animate__animated animate__fadeIn animate__delay-1s">äº²çˆ±çš„{{ blog.name }}</p>
        {% if blog.life == 0 %}
            <p class="animate__animated animate__fadeIn animate__delay-2s">æ—§äº‹å¦‚æ¢¦ï¼Œä¸€å¹´å·²è¿‡</p>
            <p class="animate__animated animate__fadeIn animate__delay-2s">è´°ä¸‰å¹´ã€æ„Ÿè°¢æœ‰ä½ !</p>
        {% else %}
            <p class="animate__animated animate__fadeIn animate__delay-2s">ä»Šå¤©æ˜¯æˆ‘ä»¬ç›¸è¯†çš„</p>
            <p class="animate__animated animate__fadeIn animate__delay-3s">ç¬¬ <small>{{ blog.life // 365 }}</small> å¹´
                <small>{{ blog.life % 365 }}</small> å¤©</p>
        {% endif %}
    </div>

</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab3">
    <div class="tab3-box">
        <p class="animate__animated animate__fadeInUp animate__delay-1s">è¿™ä¸€å¹´ä½ å†™ä¸‹äº†</p>
        <p class="animate__animated animate__fadeInUp animate__delay-2s"><small>{{ blog.article_count }}</small>
            ç¯‡åšæ–‡</p>
        <p class="animate__animated animate__fadeInUp animate__delay-3s">
            <small>{{ blog.article_word_count }}</small> ä¸ªæ–‡å­—</p>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab4">
    <div class="tab4-box">
        <p class="animate__animated animate__fadeInLeft animate__delay-1s"> å…¶ä¸­ </p>
        <p class="animate__animated animate__fadeInLeft animate__delay-2s"> {{ long_post.title }} </p>
        <p class="animate__animated animate__fadeInLeft animate__delay-3s"> {{ long_post.content[:50] }}</p>
        <p class="animate__animated animate__fadeIn animate__delay-4s"> é•¿ä¼¼ä¸€æ±Ÿæ˜¥æ°´</p>
        <p class="animate__animated animate__fadeIn animate__delay-5s"> æ°¸ä¸æ­¢æ¯ ~ </p>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab5">
    <div class="tab5-box">
        <p class="animate__animated animate__fadeInDown animate__delay-1s">åœ¨{{ special_post.date }}é‚£å¤©ï¼Œå†™ä¸‹äº†</p>
        <p class="animate__animated animate__fadeInDown animate__delay-2s">{{ special_post.title }}</p>
        <p class="animate__animated animate__fadeInDown animate__delay-3s">{{ special_post.content[:50] }}<small>â€¦â€¦</small>
        </p>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab6">
    <div class="tab6-box">
        <p class="animate__animated animate__fadeInUp animate__delay-1s">{{ sentiment_post.title }}</p>
        <p class="animate__animated animate__fadeInUp animate__delay-2s">{{ sentiment_post.content[:50] }}</p>
        <p class="animate__animated animate__fadeIn animate__delay-3s">å¦‚åˆæ˜¥çš„æš–é˜³ï¼Œå®é™è€Œæ€¡äºº</p>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab7">
    <div class="tab7-box">
        {% for keyword in blog.top_post_keys[0:5] %}
            <p class="animate__animated animate__fadeIn animate__delay-1s">{{ keyword[0] }}</p>
        {% endfor %}
        <p class="animate__animated animate__fadeInDown animate__delay-1s">è¿™äº›éƒ½æ˜¯<small>ä½ </small>çš„</p>
        <p class="animate__animated animate__fadeInDown animate__delay-2s">ä¸“å±<small>å…³é”®è¯</small></p>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab8">
    <div class="tab8-box">
        <p class="animate__animated animate__fadeInLeft animate__delay-1s">
            çƒ­çˆ±{% if blog.category == 1 %}ç”Ÿæ´»{% else %}æŠ€æœ¯{% endif %}çš„ä½ 
        </p>
        <p class="animate__animated animate__fadeInLeft animate__delay-2s">ä¸€å®šè¦ç»§ç»­ç ¥ç ºå‰è¡Œ!</p>
    </div>
</div>
<div class="container animate__animated animate__fadeIn animate__slow" id="tab9">
    <div class="tab9-box">
        <p id="yiyan"> {{ custom.yiyan }}</p>
    </div>
</div>

<script>
    // å±å¹•å°ºå¯¸
    console.log("Window inner size: ", window.innerWidth, "x", window.innerHeight);
    console.log("Window outer size: ", window.outerWidth, "x", window.outerHeight);
    console.log("Screen size: ", screen.width, "x", screen.height);
    console.log("Screen available size: ", screen.availWidth, "x", screen.availHeight);

    // è½®æ’­åˆ‡æ¢
    let carousel = {
        currentIndex: 0,
        tabs: [],

        init: function () {
            this.tabs = document.getElementsByClassName('container');

            for (let i = 0; i < this.tabs.length; i++) {
                this.tabs[i].addEventListener('click', () => {
                    this.next();
                });
            }
        },

        next: function () {
            this.tabs[this.currentIndex].classList.remove('active');
            this.currentIndex = (this.currentIndex + 1) % this.tabs.length;
            this.tabs[this.currentIndex].classList.add('active');
        }
    };

    window.onload = function () {
        carousel.init();
    };

    // å¼¹å‡ºæç¤º
    let popup = document.querySelector('.popup');
    let allowButton = document.querySelector('.allow');
    let denyButton = document.querySelector('.deny');
    let audioElement = document.getElementById('bgm');

    allowButton.addEventListener('click', function (event) {
        event.stopPropagation();
        audioElement.play(); // æ’­æ”¾éŸ³ä¹
        popup.style.display = 'none'; // éšè—å¼¹å‡ºçª—å£
    });

    denyButton.addEventListener('click', function (event) {
        event.stopPropagation();
        popup.style.display = 'none'; // éšè—å¼¹å‡ºçª—å£
    });

    // åšå®¢æœ€åçš„ä¸€è¨€
    window.addEventListener('DOMContentLoaded', (event) => {
        let textElement = document.getElementById("yiyan");
        let text = textElement.innerHTML;
        textElement.innerHTML = text.replace(/[\u3000-\u303F\uFF01-\uFF0F\uFF1A-\uFF1E\uFF3B-\uFF3F\uFF5B-\uFF60\uFFE0-\uFFE6\u00D2]/g, "<br>");
    });
</script>

</body>
</html>